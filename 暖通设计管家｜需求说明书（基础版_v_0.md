# 一、背景与目标

## 1.1 项目背景

本项目“暖通设计管家”是一个**面向暖通专业工程设计人员**的本地/局域网使用的辅助设计工具。

从长期规划看，项目目标是将暖通设计过程中常见的、重复性的、易出错的工作进行结构化与工具化，包括但不限于：设计过程记录、规范条款校核、成果整理与复核支持等。

**但在当前 V1 阶段，项目并不直接实现规范校核或自动判断功能，而是聚焦于一个基础且决定后续上限的能力：**

> **建立一套统一、完整、可复用的「暖通设计全过程文件记录模板」，用于系统化留存设计过程文件与沟通痕迹。**

项目当前明确处于：

- 功能探索期
- 架构冻结前阶段
- 需求先行、功能后置阶段

因此，本需求文件的定位不是“最终交付规格说明书”，而是作为：

> **后续功能逐步叠加时不可随意推翻的“需求基线与工程约束”。**

---

## 1.2 项目总体目标（长期不变部分）

以下目标适用于项目的**长期演进方向**，并非要求在 V1 版本全部实现。

1. **专业正确性优先**

   - 不追求“自动设计”，而是辅助工程师完成自查与复核
   - 设计过程与结论可追溯、可解释

2. **数据与逻辑分离**

   - 设计规范、规则、模板以数据形式存在
   - 程序逻辑不硬编码具体条文或专业结论

3. **低侵入式工具定位**

   - 不替代设计软件
   - 不强制改变既有设计习惯
   - 作为“随用随查、随时补录”的辅助系统存在

4. **稳定性高于智能化**

   - 允许功能分阶段落地
   - 明确拒绝黑箱判断与不可解释结论

> 注：V1 版本只落实上述目标中的“可追溯性、低侵入、结构稳定性”相关部分。

---

## 1.3 V1 现状说明（实施同步）

本文件作为需求基线，但**实现可能按阶段推进**。当前 V1 的实现以“模板化记录 + 阶段管理 + 极简执行视图”为核心，确保：

- 项目/子项创建包含：子项类型、设计阶段与模板启用清单
- 阶段切换为显式操作，单向推进，历史阶段仅可查看
- 前台极简执行视图以 3–5 项关键条目为限
- 完成度仅基于当前阶段与启用分类统计

> 任何与规范自动判断、文件内容解析相关的能力，仍为 V1 明确不做范围。

---

# 二、用户与使用场景

## 2.1 目标用户

- 暖通专业设计工程师
- 有一定规范基础，但存在：
  - 条文记忆负担重
  - 多专业接口繁杂
  - 图纸/说明书检查耗时

## 2.2 核心使用场景（初步）

1. 方案/初设阶段

   - 快速检查是否存在明显规范性风险

2. 施工图阶段

   - 针对重点系统、关键条款进行逐项核查

3. 自查 / 互查 / 审图前检查

   - 作为“第二双眼睛”

---

# 三、功能范围总体规划（阶段化约束）

## 3.1 V1 阶段明确要做的

- 建立一套覆盖暖通设计全过程的**文件分类与模板体系**
- 支持项目级选择与启用文件类别
- 以“记录与索引”为目的管理设计过程文件
- 展示项目在各阶段的文件完整性状态

## 3.2 V1 阶段明确不做的（冻结边界）

- 不进行规范条款判断
- 不进行任何自动计算或校核
- 不解析文件内容本身（DWG、Excel、PDF 等）
- 不引入流程、权限、审批等管理系统能力

> V1 的唯一目标是：**把设计过程“记录对、存完整、找得到”。**

---

# 四、总体功能架构（项目长期逻辑视角）

> 本章描述的是项目在**中长期阶段**的通用逻辑架构，用于约束未来扩展方向。 **V1 版本仅实现其中部分模块，不完整启用整条逻辑链。**

从逻辑上，系统可拆分为以下模块：

```
用户输入
   ↓
规则 / 模板选择
   ↓
规则解析与判断（V1 不启用）
   ↓
结果汇总（V1 不启用）
   ↓
结果展示与提示（V1 仅用于文件状态展示）
```

### 模块说明（V1 视角）

1. **输入模块（启用）**

   - 项目信息
   - 文件记录信息

2. **规则 / 模板模块（启用）**

   - 全过程文件分类模板

3. **判断模块（未启用）**

   - 规范与条件判断（后续版本）

4. **结果模块（未启用）**

5. **展示模块（部分启用）**

   - 文件清单
   - 缺失提示（基于模板）

---

（逻辑视角）

从逻辑上，系统拆分为 5 个核心模块：

```
用户输入
   ↓
条款/规则选择
   ↓
规则解析与判断
   ↓
结果汇总
   ↓
结果展示与提示
```

### 模块说明

1. **输入模块**

   - 工程基本信息
   - 系统参数
   - 关键设计条件

2. **规则模块**

   - 强制性条款
   - 条款分类与元数据

3. **判断模块**

   - 条件匹配
   - 条款触发判断

4. **结果模块**

   - 合规 / 不合规 / 需关注

5. **展示模块**

   - 清单化结果
   - 可定位的提示说明

---

# 五、阶段性实施策略（与 V1 对齐）

## 5.1 阶段 1：全过程文件模板与数据结构跑通（V1）

目标：

- 建立稳定的文件分类体系
- 验证项目级模板启用机制
- 跑通“记录 → 展示 → 缺失判断（结构级）”的最小闭环

特征：

- 不涉及专业判断
- 不追求界面完善
- 数据结构一经确定，后续版本尽量不破坏

## 5.2 阶段 2：在稳定结构上的功能扩展

目标：

- 在既有文件数据基础上
  - 引入规范校核
  - 引入自动检查与提示

## 5.3 阶段 3：体验与效率优化

目标：

- 提升录入效率
- 提升查看与检索体验

---

# 六、项目创建与配置流程（V1 关键流程）

> 本章用于约束 V1 版本中新建项目 / 新建子项时的**界面流程与交互顺序**，以防实现阶段出现随意跳转或隐式逻辑。

---

## 6.1 总体界面流程概览

V1 版本遵循以下总体流程：

1. 新建 / 选择项目（核电站级）
2. 在项目下新建子项（厂房级）
3. 选择当前设计阶段
4. 系统给出文件分类模板的默认预勾选结果
5. 设计人员人工确认并调整
6. 创建完成，进入子项主页

该流程为**线性流程**，不支持跨步跳转。

---

## 6.2 新建项目（核电站级）界面流程

### Step 1：进入项目管理界面

- 用户进入“项目管理 / 我的项目”页面
- 系统展示已有项目列表（核电站级）

---

### Step 2：新建项目

- 用户点击【新建项目】按钮
- 弹出新建项目界面

需填写信息：

- 项目名称（如：田湾核电站）
- 项目编码（如：0603）

说明：

- 项目编码仅用于展示与检索
- 项目创建后，编码不可修改

---

### Step 3：创建完成

- 系统创建项目空壳
- 自动进入该项目的“子项管理”界面

---

## 6.3 新建子项（厂房级）界面流程

### Step 1：进入子项管理

- 在项目主页中，点击【新建子项】

---

### Step 2：填写子项基本信息

需填写信息：

- 子项名称（如：电气厂房 / 制氯站）
- 子项编码（如：LX / CL）
- 子项类型：
  - 核岛厂房
  - 附属工业厂房

系统实时展示完整标识示例：

> 田湾核电站 0603 — 电气厂房 LX

---

### Step 3：选择当前设计阶段

- 用户选择当前阶段：
  - 方案设计
  - 初步设计
  - 施工图设计

说明：

- 阶段用于模板预勾选与文件展示标识

---

### Step 4：系统展示文件分类模板预勾选结果

- 系统根据：
  - 子项类型
  - 当前阶段
- 自动生成文件分类模板勾选结果

界面应支持：

- 查看全部一级分类
- 展开查看二级分类

---

### Step 5：人工确认与调整

- 用户可进行以下操作：
  - 勾选未启用的分类
  - 取消不适用的分类

调整原则：

- 所有调整均为显式操作
- 系统不做任何隐式补全或强制修改

---

### Step 6：创建完成并进入子项主页

- 用户点击【确认创建】
- 系统生成子项
- 进入子项主页，展示：
  - 当前阶段
  - 启用的文件分类
  - 各分类的文件记录状态

---

## 6.4 子项主页初始界面与行为约束（V1）

本节用于规定**子项创建完成后，首次及后续进入子项主页时的默认展示结构与行为**，避免 UI 与交互随实现阶段自由发挥。

---

### 6.4.1 子项主页顶部信息区

进入子项主页后，页面顶部应固定展示以下关键信息（不随滚动消失）：

- **项目名称 + 项目编码**\
  例如：田湾核电站（0603）
- **子项名称 + 子项编码**\
  例如：电气厂房（LX） / 制氯站（CL）

---

### 6.4.2 项目整体完成情况展示

在顶部信息区下方，展示“全过程文件完成情况”概览：

- 以**一级文件分类**为统计对象
- 每一类展示：
  - 分类名称
  - 完成百分比
  - 对应的进度条

完成百分比定义原则（V1）：

- 仅基于“是否已有文件记录”进行统计
- 不区分文件质量、版本或完整性
- 未启用的分类不参与计算

> 该完成情况仅用于设计过程感知，不作为考核或质量判断依据。

---

### 6.4.3 全过程文件区布局结构

子项主页主体区域为“全过程文件区”，采用**左右分栏结构**：

#### 左侧：文件分类导航区

- 展示形式：**树形结构**
- 层级：
  - 一级分类
  - 二级分类

行为规则：

- 默认仅展开一级分类
- **无任何文件记录的分类默认折叠**
- 用户手动展开 / 折叠后，系统可记忆状态（V1 可选）

---

#### 右侧：文件内容与说明区

根据左侧选择项，右侧显示对应内容：

- 当选择某一文件分类时：

  - 展示该分类下的文件列表

- 当选择“项目设计情况”时（默认项）：

  - 展示当前子项在各阶段的设计情况概览

---

### 6.4.4 辅助信息区（固定存在）

在左侧分类导航区下方，固定展示以下入口：

- **项目设计情况**（默认选中）
- **规范条文**
- **设计常见问题**

说明：

- 上述内容不属于全过程文件分类本体
- 用于设计过程中的知识与经验辅助

---

### 6.4.5 前台极简执行视图（V1 约束，新增）

为避免工具对设计人员造成额外负担，V1 版本在子项主页中必须提供一个\*\*“前台极简执行视图”**，用于承载设计人员**日常 90% 时间内的实际操作\*\*。

#### 6.4.5.1 设计原则（冻结）

- 任一时刻，前台默认仅暴露 **3–5 个“当前最重要的执行项”**
- 设计人员在不展开任何目录的前提下，应能明确知道：
  - 当前阶段最关键的未完成事项
- 超出该范围的条目：
  - 必须默认折叠
  - 不得主动打断用户

> 本视图服务于“正在干活的人”，而非模板完整性本身。

---

#### 6.4.5.2 极简执行视图与模板体系的关系

- 极简执行视图 **不是新的模板**
- 其本质是：
  - 从已启用的全过程文件模板中
  - 抽取少量“高优先级条目”用于前台集中展示

约束原则：

- 不新增数据结构
- 不复制条目
- 不改变完成度计算口径

---

#### 6.4.5.3 「制氯站」样板项目的极简执行视图示例（3 项极限版）

以 **附属工业厂房 → 制氯站（CL）** 为例，V1 在前台默认仅暴露 **3 项不可忽略的极简执行项**，其余事项通过分类完成度体现。

**极限版（固定 3 项，不得再加）：**

1. **其他专业关键条件是否齐备**  \
   （工艺条件 / 电气防爆分区 / 安全条件）

2. **危险气体相关通风设计是否完成**  \
   （氯气 / 氢气区域通风方案与计算）

3. **当前阶段成果文件是否已形成**  \
   （对应阶段的暖通图纸或说明性成果）

**设计说明：**

- 上述 3 项分别对应：
  - 多专业接口风险
  - 本项目最高安全风险
  - 当前阶段是否真正“交过东西”
- 任何制氯站项目，设计人员只需对这 3 项保持感知
- 审图意见、现场改单等事项：
  - **不进入极简执行视图**
  - 通过完成百分比与分类列表进行间接提醒

> 该 3 项为「制氯站」V1 的**不可再压缩集合**。

---

#### 6.4.5.4 「核岛厂房」极简执行视图示例（3 项对照表，冻结）

核岛厂房作为核电站核心组成部分，其设计风险主要集中在：
- 多专业强接口
- 系统完整性与冗余逻辑
- 阶段性成果的一致性

因此，核岛厂房在 V1 中 **按设计阶段分别定义 3 项极简执行视图**，用于前台默认展示。

---

##### （一）核岛厂房 × 初步设计阶段（3 项极简执行视图）

**固定 3 项，不得增加：**

1. **核岛相关专业条件是否齐备**  \
   （工艺系统条件 / 电气条件 / 安全级别与边界条件）

2. **主要通风与空调系统方案是否明确**  \
   （系统划分、运行工况、关键设备配置原则）

3. **初设阶段暖通成果是否形成**  \
   （初设说明书 / 系统图 / 关键计算文件）

**阶段说明：**

- 本阶段核心目标是“方案站得住”而非细化设计
- 不关注施工层面的深化与实现方式
- 任何与设备选型细节、安装做法相关内容：
  - 不进入极简执行视图

---

##### （二）核岛厂房 × 施工图设计阶段（3 项极简执行视图）

**固定 3 项，不得增加：**

1. **多专业接口条件是否最终确认**  \
   （结构预留 / 电气接口 / 仪控与其他系统边界）

2. **关键系统与房间的通风空调设计是否闭合**  \
   （系统完整性、冗余设置、极端工况考虑）

3. **施工图阶段成果文件是否齐全**  \
   （施工图 / 设备表 / 计算书 / 设计说明）

**阶段说明：**

- 本阶段不再讨论“做不做”，只关注“是否全部落实”
- 审图意见与后期修改：
  - 不进入极简执行视图
  - 通过完成百分比与分类条目反映

> 核岛厂房极简执行视图的核心原则是： **只盯最容易引发系统性返工的问题，而非全面事项清单。**

---

#### 6.4.5.5 其他项目的通用适配规则（冻结）


对所有项目类型（核岛厂房 / 附属工业厂房 / 其他），极简执行视图必须遵循以下通用规则：

- 每个子项：
  - 极简执行项数量 ≤ 5
- 每个阶段：
  - 仅关注“当前阶段必须完成的事项”
- 条目优先级划分遵循：
  1. 多专业接口
  2. 安全 / 风险相关设计
  3. 当前阶段成果输出

系统不做：

- 自动排序
- 风险等级判断
- 强制提醒或弹窗

---

#### 6.4.5.5 行为与交互约束（V1）

- 设计人员可直接在极简视图中：

  - 勾选完成状态
  - 快速跳转到对应分类

- 勾选行为：

  - 不弹确认
  - 不强制填写说明

> 极简执行视图的唯一目标是： **让设计人员在最少思考成本下，知道“下一步要做什么”。**

---

### 6.4.6 明确不纳入 V1 的主页能力

- 不做看板型统计（人员、时间、效率）
- 不做文件自动完整性判断
- 不做跨子项的进度对比
- 不做首页自定义布局

> 子项主页的核心目标是：**让设计人员一眼知道“现在做到哪一步、缺哪些东西”**。

---

## 6.5 设计阶段切换与历史阶段展示规则（V1 冻结）

本节用于定义**子项在不同设计阶段之间切换时的行为规则**，确保“阶段推进可追溯、历史成果可见但不干扰当前工作”。

---

### 6.5.1 设计阶段的基本定义

V1 版本仅支持以下三类设计阶段：

1. 方案设计
2. 初步设计
3. 施工图设计

阶段顺序为**单向递进关系**：

> 方案设计 → 初步设计 → 施工图设计

系统不支持阶段倒退，仅支持查看历史阶段。

---

### 6.5.2 阶段切换触发方式

- 阶段切换仅允许通过：
  - 子项主页中的【阶段切换】显式操作触发
- 不允许因文件上传、模板调整等行为隐式改变阶段

切换时，系统应要求：

- 用户确认当前阶段名称
- 明确提示：阶段切换后，后续新增文件默认归入新阶段

---

### 6.5.3 阶段切换后的数据组织原则

阶段切换后，系统遵循以下规则：

- 当前阶段标记为“进行中”
- 之前阶段自动标记为“历史阶段”

文件数据规则：

- 历史阶段文件：
  - 保留原阶段属性
  - 不自动复制到新阶段
- 新阶段文件：
  - 默认归属于当前阶段

系统不做任何自动迁移或推断。

---

### 6.5.4 历史阶段文件的可见规则

在子项主页中：

- 默认仅展示**当前阶段**的文件内容
- 提供明确入口用于查看历史阶段：
  - 按阶段切换查看
  - 或通过“显示历史阶段文件”开关

历史阶段文件展示规则：

- 只读状态（V1）
- 与当前阶段文件**视觉区分显示**（如标识“初设阶段”）

---

### 6.5.5 历史阶段对当前阶段的引用原则

V1 中允许以下行为：

- 人工在当前阶段上传文件时：
  - 在说明中引用历史阶段文件

V1 中不支持：

- 自动继承历史阶段文件
- 历史阶段文件作为当前阶段“完成度”的依据

---

### 6.5.6 阶段完成状态的理解（V1）

V1 不定义“阶段完成”的系统判定条件：

- 阶段是否完成
- 是否可以进入下一阶段

均由设计人员自行判断并触发阶段切换。

系统仅负责记录“何时进入了下一个阶段”。

---

### 6.5.7 明确不纳入 V1 的阶段管理能力

- 不做阶段审批流程
- 不做阶段冻结 / 解冻
- 不做阶段成果自动汇编
- 不做跨阶段文件差异对比

> 阶段管理在 V1 中的目标是：**时间轴清晰，而不是流程复杂**。

---

## 6.6 全过程文件完成情况百分比计算规则（V1 冻结）

本节用于定义子项主页中“全过程文件完成情况百分比”的**计算口径与行为边界**。该百分比仅作为**任务提醒工具**，不作为质量或考核指标。

---

### 6.6.1 统计对象与层级

- 统计层级：**一级文件分类**
- 每一个一级分类，独立计算完成百分比

---

### 6.6.2 完成度计算的基本规则

对某一一级分类：

- 若该分类下配置了 *N* 个二级条目（任务项）
- 已被标记为“完成”的条目数为 *M*

则该分类完成百分比为：

> 完成百分比 = M / N × 100%

示例：

- “其他专业条件（接收）”共 5 项
- 已完成并勾选 1 项
- 则完成度显示为 **20%**
- 当 5 项全部完成时，显示为 **100%**

---

### 6.6.3 “完成”状态的判定方式（V1）

V1 版本中，二级条目的“完成”状态通过**人工显式勾选**确定：

- 默认状态：未完成
- 设计人员在确认该条目对应工作已完成后，手动勾选

系统不基于：

- 是否上传文件
- 文件数量
- 文件名称

自动推断完成状态。

---

### 6.6.4 与设计阶段的关系

- 完成百分比仅反映**当前阶段**已完成情况
- 历史阶段的完成情况不计入当前阶段百分比

阶段切换后：

- 新阶段的完成状态默认为“未完成”
- 不自动继承上一阶段的勾选状态

---

### 6.6.5 未启用分类的处理方式

- 未启用的一级分类：
  - 不参与完成度统计
  - 不显示百分比与进度条

---

### 6.6.6 明确不纳入 V1 的完成度能力

- 不做文件质量判断
- 不做自动完成判定
- 不做跨分类加权汇总
- 不做项目 / 子项横向对比

> 完成百分比的唯一目标是：**提醒设计人员还有哪些工作尚未完成**。

---

## 6.7 二级条目（任务项）的来源与维护规则（V1 冻结）

本节用于定义“完成百分比”计算中所用的\*\*二级条目（任务项）\*\*的来源、调整范围与可复用规则，防止条目失控或被系统自动干预。

---

### 6.7.1 二级条目的来源

- 二级条目来源于：
  - 项目创建时所选择的文件分类模板

模板中的二级条目数量：

- 可多于 5 个
- 也可少于 5 个
- 不设固定数量要求

具体条目应根据**项目实际复杂程度**进行选择与调整。

---

### 6.7.2 模板的预置与复用机制

系统提供：

- **预置模板**：

  - 系统内置通用模板（如：核岛 / 工业厂房 + 阶段）

- **用户模板**：

  - 设计人员可在预置模板基础上修改
  - 修改后的模板可另存为新的模板文件

模板文件用于：

- 新建子项时直接选用
- 不自动影响已创建的子项

---

### 6.7.3 二级条目的可编辑范围（V1）

在子项中，针对已选用的二级条目，允许以下操作：

- 新增条目
- 删除条目
- 修改条目名称

编辑原则：

- 所有修改均为**人工显式操作**
- 系统不根据文件、阶段或历史数据自动增删条目

---

### 6.7.4 条目调整与完成度的关系

- 新增条目：

  - 默认状态为“未完成”
  - 会影响该分类完成百分比

- 删除条目：

  - 即时从完成度计算中移除

- 修改条目名称：

  - 不影响完成状态
  - 不影响历史记录

---

### 6.7.5 不同项目之间的差异原则

- 不同项目的二级条目：
  - 不要求完全一致
  - 允许根据项目复杂程度自由调整

系统不做：

- 项目间条目强制对齐
- 条目数量或名称标准化校验

> 二级条目的核心原则是：**贴合项目真实工作内容，而不是模板本身**。

---

## 八、V1 明确不做清单（Anti-Requirements，冻结）

本章用于**明确列出 V1 版本中刻意不纳入的能力与范围**，作为需求冻结与范围控制的正式依据，防止在实现与使用过程中产生隐性扩展。

本清单具有以下约束力：

- 本章所列内容，在 V1 中 **不讨论、不实现、不预留接口**
- 如需引入，必须进入 V2 及以后版本

---

## 8.1 文件与内容相关能力（V1 不做）

- 不做文件内容自动解析或识别
- 不做文件内容合规性校验
- 不做基于文件内容的规范条文匹配
- 不做图纸 / 计算书的自动比对与差异分析
- 不做文件质量、深度、正确性的系统评价

> V1 中，系统只负责“是否有文件、文件在哪里”，不负责“文件好不好”。

---

## 8.2 阶段与流程管理能力（V1 不做）

- 不做阶段完成判定
- 不做阶段审批流程
- 不做阶段冻结 / 解冻机制
- 不做强制流程推进或回退
- 不做基于阶段的权限控制

> 阶段在 V1 中是时间标记，而不是管理关卡。

---

## 8.3 进度与统计相关能力（V1 不做）

- 不做人员维度的进度统计
- 不做工时统计或自动工期计算
- 不做跨子项、跨项目的进度对比
- 不做进度完成情况的排名或考核
- 不做进度异常自动预警

> V1 的完成百分比仅用于个人工作提醒，不承担管理职能。

---

## 8.4 模板与标准化约束能力（V1 不做）

- 不强制模板统一
- 不强制二级条目名称标准化
- 不校验项目间条目一致性
- 不要求不同项目完成度可比

> 模板用于辅助，而非统一设计行为。

---

## 8.5 权限与协作能力（V1 不做）

- 不做角色权限细分
- 不做多人并行编辑控制
- 不做修改冲突检测
- 不做操作审批或签名

> V1 默认单一设计责任人使用模型。

---

## 8.6 自动化与智能化能力（V1 不做）

- 不做规则推断
- 不做自动补全任务项
- 不做任务完成状态自动判断
- 不做 AI 建议或风险提示

> V1 中，系统不“替设计人员做决定”。

---

## 8.7 展示与界面可定制能力（V1 不做）

- 不做首页自定义布局
- 不做可拖拽模块
- 不做多视图切换（看板 / 时间轴等）
- 不做皮肤、主题配置

> V1 以稳定与一致性优先。

---

## 8.8 跨系统与对外能力（V1 不做）

- 不做与设计软件（CAD/BIM）的实时联动
- 不做与企业管理系统对接
- 不做外部数据同步

---

## 8.9 V1 范围控制总结

V1 的目标不是覆盖所有设计管理问题，而是：

- 稳定记录设计全过程文件
- 清晰呈现当前工作进展
- 可回溯、不可替代人的判断

**任何超出上述目标的需求，均视为 V2 及以后版本议题。**

---

# 附录 A：V1 可交付需求说明书目录（建议版）

> 本目录用于对外（开发、外包、评审）交付，作为**唯一需求基准结构**。正文内容以本文件现有章节为准，不在此重复。

---

## 1. 项目背景与目标

1.1 项目背景说明\
1.2 设计对象与适用范围\
1.3 V1 版本目标与定位\
1.4 版本边界说明

---

## 2. 基本概念与术语定义

2.1 项目 / 子项定义\
2.2 核岛厂房与附属工业厂房说明\
2.3 设计阶段定义（方案 / 初设 / 施工图）\
2.4 全过程文件概念说明

---

## 3. 系统整体结构与层级关系

3.1 系统层级总览\
3.2 项目层级结构\
3.3 子项作为最小工作单元的原则

---

## 4. 全过程文件体系设计（V1 冻结）

4.1 一级文件分类结构\
4.2 二级文件分类结构\
4.3 分类启用 / 停用规则

---

## 5. 文件与任务项的最小结构要求（V1 冻结）

5.1 单个文件的最小信息结构\
5.2 二级条目（任务项）定义

---

## 6. 项目创建与配置流程（V1 关键流程）

6.1 新建项目流程\
6.2 新建子项流程\
6.3 子项创建时的模板与预勾选规则\
6.4 子项主页初始界面与行为约束\
6.5 设计阶段切换与历史阶段展示规则\
6.6 全过程文件完成情况百分比计算规则\
6.7 二级条目（任务项）的来源与维护规则

---

## 7. 模板运行示例（说明性，不冻结）

7.1 公共建筑示例（参考）\
7.2 工业厂房示例（制氯站）\
7.3 模板运行结果说明

---

## 8. V1 明确不做清单（Anti-Requirements，冻结）

8.1 文件与内容相关能力（不做）\
8.2 阶段与流程管理能力（不做）\
8.3 进度与统计相关能力（不做）\
8.4 模板与标准化约束能力（不做）\
8.5 权限与协作能力（不做）\
8.6 自动化与智能化能力（不做）\
8.7 展示与界面可定制能力（不做）\
8.8 跨系统与对外能力（不做）

---

## 9. 版本规划与后续展望（非 V1 约束）

---

## 9.3 架构演进声明（Architecture Evolution Statement）

> 本声明用于约束本系统在 V1 之后的功能扩展方式，确保**功能可增长，但基础不可推翻**。 本声明为原则性约束，不对应任何具体版本的强制交付内容。

### 9.3.1 核心架构不变原则（不可破坏）

无论引入何种新功能，系统必须始终遵守以下不可破坏原则：

1. **全过程文件结构不可重写**

   - V1 中定义的文件分类、任务项、阶段关系，均视为基础数据结构
   - 后续版本不得要求对既有项目进行结构性迁移才能运行

2. **不引入隐式判断或黑箱结论**

   - 系统可以“提示”“标记”“引用”，但不得在无人工确认的情况下替代设计人员做结论性判断

3. **功能叠加而非功能侵入**

   - 新能力应作为“附加模块”存在
   - 不得强制修改现有录入流程、页面结构或用户习惯

4. **数据先于流程**

   - 任何流程、校审、审批能力，必须建立在已有、稳定的数据之上
   - 不允许为了流程而倒逼修改数据结构

---

### 9.3.2 已预期的未来能力方向（不要求实现顺序）

以下能力均被视为**合理、可预期的系统演进方向**，其设计前提是：

> 不破坏 V1 已冻结的数据结构与用户心智模型。

#### （一）多用户与权限体系（推荐：中后期）

- 在 V1 的“单一责任人模型”基础上扩展
- 引入概念：
  - 负责人（Owner）
  - 协作人（Collaborator）
  - 校审人（Reviewer）

设计约束：

- 不改变文件与任务项的基本定义
- 权限附着于对象，不倒置为流程约束

---

#### （二）校审 / 监督与留痕机制（推荐：后期）

- 引入“提交—校审—反馈”的状态层
- 校审作用于：
  - 已填写内容
  - 已勾选完成状态

设计约束：

- 校审不等于冻结编辑
- 校审结果不自动修改原始数据

---

#### （三）标准化成果生成（规格书 / 图纸说明）（推荐：中期）

- 作为**独立模块**存在
- 基于填写的结构化数据生成文本性成果

设计约束：

- 不将生成所需字段强行塞入全过程文件模板
- 允许生成模块有自己独立的数据表与界面

---

#### （四）规范条文关联与提示（推荐：后期）

- 将规范条文作为“参考与关联信息”呈现
- 与文件分类、任务项形成弱关联

设计约束：

- 不做自动合规判断
- 不生成“通过 / 不通过”结论

---

#### （五）设计经验沉淀与常见问题库（推荐：早期可做）

- 来源：
  - 历史项目
  - 审图 / 返工问题
- 以“提示”“参考”为主要形式

设计约束：

- 不强制填写
- 不影响主流程效率

---

#### （六）轻量级检索与回溯能力（推荐：早期可做）

- 条件搜索：
  - 文件类型
  - 阶段
  - 关键词

设计约束：

- 不引入复杂查询条件
- 面向“快速找资料”，而非分析

---

### 9.3.3 明确刻意回避的发展方向（长期）

以下方向即使未来讨论，也必须保持高度克制：

- 重度项目管理系统（工时、考核、绩效）
- 设计行为强约束（不填不让走）
- 高强度自动化设计与 AI 决策
- 与大型设计平台的深度耦合替代

> 本系统的长期定位，始终是： **设计人员真正愿意用、随用随开的辅助工具，而不是新的负担来源。**

---

### 9.3.4 前台轻量、后台复杂的总体原则（冻结建议）

- 前台：

  - 操作步骤少
  - 不要求一次性填写完整
  - 随时可补录

- 后台：

  - 允许结构复杂
  - 支撑长期扩展
  - 不向用户暴露技术复杂性

> 本条原则用于评审后续所有功能设计是否“越界”。

---

### 9.3.5 架构演进的最终衡量标准

新增功能是否合理，只需回答一个问题：

> **它是否让设计人员在不额外付出明显成本的前提下，更不容易遗漏真正重要的事？**

若答案不明确，则该功能应被延后或放弃。

9.1 V2 潜在能力方向（示意）\
9.2 版本演进原则说明

---

> 本目录对应正文内容已在当前文档中完整定义，可作为开发、评审与验收的统一索引结构。

---

# 附录 B：V1 开发启动前自检清单（给自己用）

> 本清单用于 **在正式启动任何开发工作之前**，由需求提出者本人逐条自检。
>
> 目的不是“证明需求多完整”，而是**确认这个 V1 不会把项目再次拖入失控状态**。
>
> 只要有任意一项回答为「否 / 不确定」，都应 **暂停开发**，而不是“边做边想”。

---

## 一、目标与边界自检（必须全是「是」）

-

---

## 二、对设计人员负担的自检（核心风险项）

-

> 若需要解释背景、理念或“以后会很强大”，说明该功能不该进 V1。

---

## 三、功能克制性自检（防止需求膨胀）

逐条确认以下内容在 V1 中 **明确不做**，并且我不打算在开发过程中“临时加一点”：

-

> 只要出现一句： “这个顺手加一下也不复杂”， 就必须回到需求文档确认是否越界。

---

## 四、模板与数据结构自检（技术风险前置）

-

---

## 五、失败容忍度自检（非常关键）

诚实回答以下问题：

-

---

## 六、与开发沟通的心理底线自检（防止再次失控）

-

---

## 七、最终启动确认（必须全部满足）

只有当以下 3 条全部为「是」，才能进入开发阶段：

-

---

> **重要提醒（给未来的自己）**：
>
> 本清单不是形式文件。
>
> 当项目失控的征兆出现时（功能变多、解释变长、负担变重）， **第一件事不是找解决方案，而是回到这里重新逐条回答。**
